
 <!DOCTYPE HTML>
<html lang="Chinese">
<head>
  <meta charset="UTF-8">
  
    <title>公共技术之 Java反射 Reflection | Mr.Simple&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="Mr.Simple">
    
    <meta name="description" content="1. 了解Java中的反射
1.1 什么是Java的反射
   Java反射是可以让我们在运行时获取类的函数、字段、父类、接口等Class内部信息的机制。通过反射还可以让我们在运行期实例化对象，调用方法，通过调用get/set方法获取变量的值,即使方法或字段是私有的的也可以通过反射的形式调用,这种“">
    
    
    
    
    
    <link rel="icon" href="/img/favicon.png">
    
    
    <link rel="apple-touch-icon" href="/img/header.png">
    <link rel="apple-touch-icon-precomposed" href="/img/header.png">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/header.png" alt="Mr.Simple&#39;s Blog" title="Mr.Simple&#39;s Blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Mr.Simple&#39;s Blog">Mr.Simple&#39;s Blog</a></h1>
				<h2 class="blog-motto">KEEP IT SIMPLE AND STUPID!</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					
						<li><a href="/">Home</a></li>
					
						<li><a href="http://blog.csdn.net/bboyfeiyu">CSDN Blog</a></li>
					
						<li><a href="https://github.com/bboyfeiyu">Github</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:www.simplecoder.cn">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/02/12/reflections/" title="公共技术之 Java反射 Reflection" itemprop="url">公共技术之 Java反射 Reflection</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://www.simplecoder.cn" title="Mr.Simple">Mr.Simple</a>
    </p>
  <p class="article-time">
    <time datetime="2015-02-12T08:15:09.000Z" itemprop="datePublished">Feb 12 2015</time>
    Updated:<time datetime="2015-02-12T08:17:34.000Z" itemprop="dateModified">Feb 12 2015</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-_了解Java中的反射"><span class="toc-number">1.</span> <span class="toc-text">1. 了解Java中的反射</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1_什么是Java的反射"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 什么是Java的反射</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2_Class类"><span class="toc-number">2.</span> <span class="toc-text">1.2 Class类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-_反射Class以及构造对象"><span class="toc-number">3.</span> <span class="toc-text">2. 反射Class以及构造对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1_获取Class对象"><span class="toc-number">3.1.</span> <span class="toc-text">2.1 获取Class对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2_通过Class对象构造目标类型的对象"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 通过Class对象构造目标类型的对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3_反射获取类中函数"><span class="toc-number">4.</span> <span class="toc-text">3 反射获取类中函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1_获取当前类中定义的方法"><span class="toc-number">4.1.</span> <span class="toc-text">3.1 获取当前类中定义的方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2_获取当前类、父类中定义的公有方法"><span class="toc-number">4.2.</span> <span class="toc-text">3.2 获取当前类、父类中定义的公有方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4_反射获取类中的字段"><span class="toc-number">5.</span> <span class="toc-text">4 反射获取类中的字段</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1_获取当前类中定义的字段"><span class="toc-number">5.1.</span> <span class="toc-text">4.1 获取当前类中定义的字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2_获取当前类、父类中定义的公有字段"><span class="toc-number">5.2.</span> <span class="toc-text">4.2 获取当前类、父类中定义的公有字段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5_反射获取父类与接口"><span class="toc-number">6.</span> <span class="toc-text">5 反射获取父类与接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1_获取父类"><span class="toc-number">6.1.</span> <span class="toc-text">5.1 获取父类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2_获取接口"><span class="toc-number">6.2.</span> <span class="toc-text">5.2 获取接口</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6_获取注解信息"><span class="toc-number">7.</span> <span class="toc-text">6 获取注解信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#杂谈"><span class="toc-number">8.</span> <span class="toc-text">杂谈</span></a></li></ol>
		</div>
		
		<h2 id="1-_了解Java中的反射">1. 了解Java中的反射</h2>
<h3 id="1-1_什么是Java的反射">1.1 什么是Java的反射</h3>
<p>   Java反射是可以让我们在运行时获取类的函数、字段、父类、接口等Class内部信息的机制。通过反射还可以让我们在运行期实例化对象，调用方法，通过调用get/set方法获取变量的值,即使方法或字段是私有的的也可以通过反射的形式调用,这种“看透class”的能力被称为内省,这种能力在框架开发中尤为重要。<br>   有些情况下,我们要使用的类在运行时才会确定,这个时候我们不能在编译期就使用它,因此只能通过反射的形式来使用在运行时才存在的类(该类符合某种特定的规范,例如JDBC),这是反射用得比较多的场景。<br>   还有一个比较常见的场景就是编译时我们对于类的内部信息不可知,必须得到运行时才能获取类的具体信息。比如ORM框架,在运行时才能够获取类中的各个字段,然后通过反射的形式获取其字段名和值,存入数据库。这也是反射比较经典应用场景之一。  </p>
<h2 id="1-2_Class类">1.2 Class类</h2>
<p>   那么既然反射是操作Class信息的,Class又是什么呢?<br>   <img src="http://img.blog.csdn.net/20150208210140610" alt="这里写图片描述"><br>   当我们编写完一个Java项目之后,所有的Java文件都会被编译成一个.class文件，这些Class对象承载了这个类型的父类、接口、构造函数、方法、字段等原始信息，这些class文件在程序运行时会被ClassLoader加载到虚拟机中。当一个类被加载以后，Java虚拟机就会在内存中自动产生一个Class对象。我们通过new的形式创建对象实际上就是通过这些Class来创建,只是这个过程对于我们是不透明的而已。<br>   下面的章节中我们会为大家演示反射的一些常用api,从代码的角度理解反射。        </p>
<h2 id="2-_反射Class以及构造对象">2. 反射Class以及构造对象</h2>
<h3 id="2-1_获取Class对象">2.1 获取Class对象</h3>
<p>   在你想检查一个类的信息之前，你首先需要获取类的Class对象。Java中的所有类型包括基本类型,即使是数组都有与之关联的Class类的对象。如果你在编译期知道一个类的名字的话，那么你可以使用如下的方式获取一个类的Class对象。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="input"><span class="prompt">Class&lt;?&gt;</span> myObjectClass = <span class="constant">MyObject</span>.class;</span></div></pre></td></tr></table></figure>



<p>   如果你已经得到了某个对象,但是你想获取这个对象的Class对象,那么你可以通过下面的方法得到:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Student <span class="keyword">me</span> = <span class="keyword">new</span> Student(<span class="string">"mr.simple"</span>);</div><div class="line"><span class="keyword">Class</span>&lt;?&gt; clazz = <span class="keyword">me</span>.getClass();</div></pre></td></tr></table></figure>



<p>   如果你在编译期获取不到目标类型,但是你知道它的完整类路径,那么你可以通过如下的形式来获取Class对象:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="input"><span class="prompt">Class&lt;?&gt;</span> myObjectClass = <span class="constant">Class</span>.forName(<span class="string">"com.simple.User"</span>);</span></div></pre></td></tr></table></figure>



<p>在使用Class.forName()方法时，你必须提供一个类的全名，这个全名包括类所在的包的名字。例如User类位于com.simple包，那么他的完整类路径就是com.simple.User。<br>如果在调用Class.forName()方法时，没有在编译路径下(classpath)找到对应的类，那么将会抛出ClassNotFoundException。     </p>
<p><strong>接口说明</strong>     </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// 加载指定的<span class="class"><span class="keyword">Class</span>对象,参数1为要加载的类的完整路径,例如"<span class="title">com</span>.<span class="title">simple</span>.<span class="title">Student</span>". ( 常用方式 )</span></div><div class="line"><span class="keyword">public</span> static <span class="class"><span class="keyword">Class</span>&lt;?&gt; <span class="title">forName</span> (<span class="title">String</span> <span class="title">className</span>)</span></div><div class="line"></div><div class="line">// 加载指定的<span class="class"><span class="keyword">Class</span>对象,参数1为要加载的类的完整路径,例如"<span class="title">com</span>.<span class="title">simple</span>.<span class="title">Student</span>";</span></div><div class="line">// 参数<span class="number">2</span>为是否要初始化该<span class="class"><span class="keyword">Class</span>对象,参数3为指定加载该类的<span class="title">ClassLoader</span>.</span></div><div class="line"><span class="keyword">public</span> static <span class="class"><span class="keyword">Class</span>&lt;?&gt; <span class="title">forName</span> (<span class="title">String</span> <span class="title">className</span>, <span class="title">boolean</span> <span class="title">shouldInitialize</span>, <span class="title">ClassLoader</span> <span class="title">classLoader</span>)</span></div></pre></td></tr></table></figure>




<h3 id="2-2_通过Class对象构造目标类型的对象">2.2 通过Class对象构造目标类型的对象</h3>
<p>   一旦你拿到Class对象之后,你就可以为所欲为了！当你善用它的时候它就是神兵利器,当你心怀鬼胎之时它就会变成恶魔。但获取Class对象只是第一步,我们需要在执行那些强大的行为之前通过Class对象构造出该类型的对象,然后才能通过该对象释放它的能量。<br>    我们知道,在java中药构造对象,必须通过该类的构造函数,那么其实反射也是一样一样的。但是它们确实有区别的,通过反射构造对象,我们首先要获取类的Constructor(构造器)对象,然后通过Constructor来创建目标类的对象。还是直接上代码的。     </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> static <span class="built_in">void</span> classForName() {</div><div class="line">    <span class="keyword">try</span> {</div><div class="line">    	<span class="comment">// 获取Class对象</span></div><div class="line">        Class&lt;?&gt; clz = Class.forName(<span class="string">"org.java.advance.reflect.Student"</span>);</div><div class="line">        <span class="comment">// 通过Class对象获取Constructor,Student的构造函数有一个字符串参数,</span></div><div class="line">        <span class="comment">// 因此这里需要传递参数的类型 ( Student类见后面的代码 )</span></div><div class="line">        Constructor&lt;?&gt; <span class="constructor"><span class="keyword">constructor</span> = clz.getConstructor(String.class);</span></div><div class="line">        // 通过Constructor来创建Student对象</div><div class="line">        Object obj = <span class="keyword">constructor</span>.newInstance("mr.simple");</div><div class="line">        System.out.println(" obj :  " + obj.toString());</div><div class="line">    } catch (Exception e) {</div><div class="line">        e.printStackTrace();</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>


<p>   通过上述代码,我们就可以在运行时通过完整的类名来构建对象。      </p>
<p><strong>获取构造函数接口</strong>        </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 获取一个公有的构造函数,参数为可变参数,如果构造函数有参数,那么需要将参数的类型传递给getConstructor方法</span></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">Constructor</span>&lt;<span class="title">T</span>&gt; <span class="title">getConstructor</span> <span class="params">(<span class="keyword">Class</span>...&lt;?&gt; parameterTypes)</span></span></div><div class="line">// 获取目标类所有的公有构造函数</div><div class="line"><span class="title">public</span> <span class="title">Constructor</span>[]&lt;?&gt; <span class="title">getConstructors</span> <span class="params">()</span></div></pre></td></tr></table></figure>


<p> 注意,当你通过反射获取到Constructor、Method、Field后,在反射调用之前将此对象的 accessible 标志设置为true,以此来提升反射速度。值为 true 则指示反射的对象在使用时应该取消 Java 语言访问检查。值为 false 则指示反射的对象应该实施 Java 语言访问检查。例如 :     </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">Constructor</span>&lt;?&gt; <span class="title">constructor</span> = <span class="title">clz</span>.<span class="title">getConstructor</span><span class="params">(String.<span class="keyword">class</span>)</span>;</span></div><div class="line"><span class="comment">// 设置Constructor的Accessible</span></div><div class="line"><span class="function"><span class="keyword">constructor</span>.<span class="title">setAccessible</span><span class="params">(<span class="keyword">true</span>)</span>;</span></div><div class="line"></div><div class="line"><span class="comment">// 设置Methohd的Accessible</span></div><div class="line"><span class="function"><span class="keyword">Method</span> <span class="title">learnMethod</span> = <span class="title">Student</span>.<span class="title">class</span>.<span class="title">getMethod</span><span class="params">("learn", String.<span class="keyword">class</span>)</span>;</span></div><div class="line">learnMethod.setAccessible(<span class="keyword">true</span>);</div></pre></td></tr></table></figure>


<p>   由于后面还会用到Student以及相关的类,我们在这里就先给出它们的代码吧。<br><strong>Person.java</strong>     </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> Person {</div><div class="line">    String mName;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="title">Person</span>(String aName) {</div><div class="line">        mName = aName;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sayHello</span>(String friendName) {</div><div class="line">        System.<span class="keyword">out</span>.println(mName + <span class="string">" say hello to "</span> + friendName);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">showMyName</span>() {</div><div class="line">        System.<span class="keyword">out</span>.println(<span class="string">"My name is "</span> + mName);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">breathe</span>() {</div><div class="line">		System.<span class="keyword">out</span>.println(<span class="string">" take breathe "</span>);</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>



<p><strong>Student.java</strong>    </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Examination</span> </span>{</div><div class="line">    <span class="comment">// 年级</span></div><div class="line">    <span class="keyword">int</span> mGrade;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="title">Student</span>(String aName) {</div><div class="line">        <span class="keyword">super</span>(aName);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="title">Student</span>(<span class="keyword">int</span> grade, String aName) {</div><div class="line">        <span class="keyword">super</span>(aName);</div><div class="line">        mGrade = grade;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title">learn</span>(String course) {</div><div class="line">        System.out.println(mName + <span class="string">" learn "</span> + course);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">takeAnExamination</span>() {</div><div class="line">		System.out.println(<span class="string">" takeAnExamination "</span>);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">public</span> String <span class="title">toString</span>() {</div><div class="line">        <span class="keyword">return</span> <span class="string">" Student :  "</span> + mName;</div><div class="line">    }</div></pre></td></tr></table></figure>



<p><strong>Breathe.java</strong>   </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 呼吸接口</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">interface</span> Breathe {</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">breathe</span>();</div><div class="line">}</div></pre></td></tr></table></figure>

<p><strong>Examination.java</strong>   </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 考试接口</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">interface</span> Examination {</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">takeAnExamination</span>();</div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="3_反射获取类中函数">3 反射获取类中函数</h2>
<h3 id="3-1_获取当前类中定义的方法">3.1 获取当前类中定义的方法</h3>
<p>   要获取当前类中定义的所有方法可以通过Class中的getDeclaredMethods函数,它会获取到当前类中的public、default、protected、private的所有方法。而getDeclaredMethod(String name,Class…&lt;?&gt; parameterTypes)则是获取某个指定的方法。代码示例如下 :  </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">private <span class="keyword">static</span> <span class="type">void</span> showDeclaredMethods() {</div><div class="line">     <span class="type">Student</span> student = new <span class="type">Student</span>(<span class="string">"mr.simple"</span>);</div><div class="line">       <span class="type">Method</span>[] methods = student.getClass().getDeclaredMethods();</div><div class="line">       <span class="keyword">for</span> (<span class="type">Method</span> <span class="keyword">method</span> : methods) {</div><div class="line">           <span class="type">System</span>.<span class="keyword">out</span>.println(<span class="string">"declared method name : "</span> + <span class="keyword">method</span>.getName());</div><div class="line">       }</div><div class="line"></div><div class="line">       <span class="keyword">try</span> {</div><div class="line">           <span class="type">Method</span> learnMethod = student.getClass().getDeclaredMethod(<span class="string">"learn"</span>, <span class="type">String</span>.class);</div><div class="line">           // 获取方法的参数类型列表</div><div class="line">           <span class="type">Class</span>&lt;?&gt;[] paramClasses = learnMethod.getParameterTypes() ;</div><div class="line">           <span class="keyword">for</span> (<span class="type">Class</span>&lt;?&gt; class1 : paramClasses) {</div><div class="line">               <span class="type">System</span>.<span class="keyword">out</span>.println(<span class="string">"learn 方法的参数类型 : "</span> + class1.getName());</div><div class="line">           }</div><div class="line">           // 是否是private函数,字段是否是private也可以使用这种方式判断</div><div class="line">           <span class="type">System</span>.<span class="keyword">out</span>.println(learnMethod.getName() + <span class="string">" is private "</span></div><div class="line">                   + <span class="type">Modifier</span>.isPrivate(learnMethod.getModifiers()));</div><div class="line">           learnMethod.invoke(student, <span class="string">"java ---&gt; "</span>);</div><div class="line">       } catch (<span class="type">Exception</span> e) {</div><div class="line">           e.printStackTrace();</div><div class="line">       }</div><div class="line">   }</div></pre></td></tr></table></figure>




<h3 id="3-2_获取当前类、父类中定义的公有方法">3.2 获取当前类、父类中定义的公有方法</h3>
<p>   要获取当前类以及父类中的所有public方法可以通过Class中的getMethods函数,而getMethod则是获取某个指定的方法。代码示例如下 :  </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">private <span class="keyword">static</span> <span class="type">void</span> showMethods() {</div><div class="line">    <span class="type">Student</span> student = new <span class="type">Student</span>(<span class="string">"mr.simple"</span>);</div><div class="line">    // 获取所有方法</div><div class="line">    <span class="type">Method</span>[] methods = student.getClass().getMethods();</div><div class="line">    <span class="keyword">for</span> (<span class="type">Method</span> <span class="keyword">method</span> : methods) {</div><div class="line">        <span class="type">System</span>.<span class="keyword">out</span>.println(<span class="string">"method name : "</span> + <span class="keyword">method</span>.getName());</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">try</span> {</div><div class="line">        // 通过getMethod只能获取公有方法,如果获取私有方法则会抛出异常,比如这里就会抛异常</div><div class="line">        <span class="type">Method</span> learnMethod = student.getClass().getMethod(<span class="string">"learn"</span>, <span class="type">String</span>.class);</div><div class="line">        // 是否是private函数,字段是否是private也可以使用这种方式判断</div><div class="line">        <span class="type">System</span>.<span class="keyword">out</span>.println(learnMethod.getName() + <span class="string">" is private "</span> + <span class="type">Modifier</span>.isPrivate(learnMethod.getModifiers()));</div><div class="line">        // 调用learn函数</div><div class="line">        learnMethod.invoke(student, <span class="string">"java"</span>);</div><div class="line">    } catch (<span class="type">Exception</span> e) {</div><div class="line">        e.printStackTrace();</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>




<p><strong>接口说明</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// 获取<span class="class"><span class="keyword">Class</span>对象中指定函数名和参数的函数,参数一为函数名,参数2为参数类型列表</span></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">Method</span> <span class="title">getDeclaredMethod</span> (</span>String name, <span class="class"><span class="keyword">Class</span>...&lt;?&gt; <span class="title">parameterTypes</span>)</span></div><div class="line"></div><div class="line">// 获取该<span class="class"><span class="keyword">Class</span>对象中的所有函数( 不包含从父类继承的函数 )</span></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">Method</span>[] <span class="title">getDeclaredMethods</span> (</span>)</div><div class="line"></div><div class="line">// 获取指定的<span class="class"><span class="keyword">Class</span>对象中的**公有**函数,参数一为函数名,参数2为参数类型列表</span></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">Method</span> <span class="title">getMethod</span> (</span>String name, <span class="class"><span class="keyword">Class</span>...&lt;?&gt; <span class="title">parameterTypes</span>)</span></div><div class="line"></div><div class="line">// 获取该<span class="class"><span class="keyword">Class</span>对象中的所有**公有**函数 ( 包含从父类和接口类集成下来的函数 )</span></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">Method</span>[] <span class="title">getMethods</span> (</span>)</div></pre></td></tr></table></figure>


<p>   这里需要注意的是getDeclaredMethod和getDeclaredMethods包含private、protected、default、public的函数,并且通过这两个函数获取到的只是在自身中定义的函数,从父类中集成的函数不能够获取到。而getMethod和getMethods只包含public函数,父类中的公有函数也能够获取到。           </p>
<h2 id="4_反射获取类中的字段">4 反射获取类中的字段</h2>
<p>   获取字段和章节3中获取方法是非常相似的,只是从getMethod函数换成了getField,从getDeclaredMethod换成了getDeclaredField罢了。      </p>
<h3 id="4-1_获取当前类中定义的字段">4.1 获取当前类中定义的字段</h3>
<p>   要获取当前类中定义的所有字段可以通过Class中的getDeclaredMethods函数,它会获取到当前类中的public、default、protected、private的所有方法。而getDeclaredMethods则是获取某个指定的方法。代码示例如下 :  </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showDeclaredFields</span>() {</div><div class="line">    Student student = <span class="keyword">new</span> Student(<span class="string">"mr.simple"</span>);</div><div class="line">    <span class="comment">// 获取当前类和父类的所有公有字段</span></div><div class="line">    Field[] publicFields = student.getClass().getDeclaredFields();</div><div class="line">    <span class="keyword">for</span> (Field field : publicFields) {</div><div class="line">        System.<span class="keyword">out</span>.println(<span class="string">"declared field name : "</span> + field.getName());</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">try</span> {</div><div class="line">        <span class="comment">// 获取当前类和父类的某个公有字段</span></div><div class="line">        Field gradeField = student.getClass().getDeclaredField(<span class="string">"mGrade"</span>);</div><div class="line">        <span class="comment">// 获取属性值</span></div><div class="line">        System.<span class="keyword">out</span>.println(<span class="string">" my grade is : "</span> + gradeField.getInt(student));</div><div class="line">        <span class="comment">// 设置属性值</span></div><div class="line">        gradeField.<span class="keyword">set</span>(student, <span class="number">10</span>);</div><div class="line">        System.<span class="keyword">out</span>.println(<span class="string">" my grade is : "</span> + gradeField.getInt(student));</div><div class="line">    } <span class="keyword">catch</span> (Exception e) {</div><div class="line">        e.printStackTrace();</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>




<h3 id="4-2_获取当前类、父类中定义的公有字段">4.2 获取当前类、父类中定义的公有字段</h3>
<p>   要获取当前类以及父类中的所有public字段可以通过Class中的getFields函数,而getField则是获取某个指定的字段。代码示例如下 :  </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showFields</span>() {</div><div class="line">    Student student = <span class="keyword">new</span> Student(<span class="string">"mr.simple"</span>);</div><div class="line">    <span class="comment">// 获取当前类和父类的所有公有字段</span></div><div class="line">    Field[] publicFields = student.getClass().getFields();</div><div class="line">    <span class="keyword">for</span> (Field field : publicFields) {</div><div class="line">        System.<span class="keyword">out</span>.println(<span class="string">"field name : "</span> + field.getName());</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">try</span> {</div><div class="line">        <span class="comment">// 获取当前类和父类的某个公有字段</span></div><div class="line">        Field ageField = student.getClass().getField(<span class="string">"mAge"</span>);</div><div class="line">        System.<span class="keyword">out</span>.println(<span class="string">" age is : "</span> + ageField.getInt(student));</div><div class="line">    } <span class="keyword">catch</span> (Exception e) {</div><div class="line">        e.printStackTrace();</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>




<p><strong>接口说明</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// 获取<span class="class"><span class="keyword">Class</span>对象中指定字段名的字段,参数一为字段名</span></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">Method</span> <span class="title">getDeclaredField</span> (</span>String name)</div><div class="line"></div><div class="line">// 获取该<span class="class"><span class="keyword">Class</span>对象中的所有字段( 不包含从父类继承的字段 )</span></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">Method</span>[] <span class="title">getDeclaredFields</span> (</span>)</div><div class="line"></div><div class="line">// 获取指定的<span class="class"><span class="keyword">Class</span>对象中的**公有**字段,参数一为字段名</span></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">Method</span> <span class="title">getField</span> (</span>String name)</div><div class="line"></div><div class="line">// 获取该<span class="class"><span class="keyword">Class</span>对象中的所有**公有**字段 ( 包含从父类和接口类集成下来的公有字段 )</span></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">Method</span>[] <span class="title">getFields</span> (</span>)</div></pre></td></tr></table></figure>


<p>   这里需要注意的是getDeclaredMethod和getDeclaredMethods包含private、protected、default、public的函数,并且通过这两个函数获取到的只是在自身中定义的函数,从父类中集成的函数不能够获取到。而getMethod和getMethods只包含public函数,父类中的公有函数也能够获取到。 </p>
<h2 id="5_反射获取父类与接口">5 反射获取父类与接口</h2>
<h3 id="5-1_获取父类">5.1 获取父类</h3>
<p>获取Class对象的父类。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="type">Student</span> student = <span class="keyword">new</span> <span class="type">Student</span>(<span class="string">"mr.simple"</span>);</div><div class="line"><span class="type">Class</span>&lt;?&gt; superClass = student.getClass().getSuper<span class="class"><span class="keyword">class</span>();</span></div><div class="line"><span class="title">while</span> (<span class="title">superClass</span> != <span class="title">null</span>) {</div><div class="line">    <span class="type">System</span>.out.<span class="built_in">println</span>(<span class="string">"Student's super class is : "</span> + superClass.getName());</div><div class="line">    <span class="comment">// 再获取父类的上一层父类,直到最后的Object类,Object的父类为null</span></div><div class="line">    superClass = superClass.getSuper<span class="class"><span class="keyword">class</span>();</span></div><div class="line">}</div></pre></td></tr></table></figure>




<h3 id="5-2_获取接口">5.2 获取接口</h3>
<p>   获取Class对象中实现的接口。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showInterfaces</span>() {</div><div class="line">    Student student = <span class="keyword">new</span> Student(<span class="string">"mr.simple"</span>);</div><div class="line">    Class&lt;?&gt;[] interfaceses = student.getClass().getInterfaces();</div><div class="line">    <span class="keyword">for</span> (Class&lt;?&gt; class1 : interfaceses) {</div><div class="line">        System.<span class="keyword">out</span>.println(<span class="string">"Student's interface is : "</span> + class1.getName());</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>




<h2 id="6_获取注解信息">6 获取注解信息</h2>
<p>在框架开发中,注解加反射的组合使用是最为常见形式的。关于注解方面的知识请参考<a href="http://codekk.com/open-source-project-analysis/detail/Android/Trinea/%E5%85%AC%E5%85%B1%E6%8A%80%E6%9C%AF%E7%82%B9%E4%B9%8BJava%20%E6%B3%A8%E8%A7%A3%20Annotation" target="_blank">公共技术点之Java 注解 Annotation</a>,定义注解时我们会通过@Target指定该注解能够作用的类型,看如下示例:    </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="annotation">@Target</span>({</div><div class="line">        ElementType.METHOD, ElementType.FIELD, ElementType.TYPE</div><div class="line">})</div><div class="line"><span class="annotation">@Retention</span>(RetentionPolicy.RUNTIME)</div><div class="line"><span class="keyword">static</span> <span class="annotation">@interface</span> Test {</div><div class="line"></div><div class="line">}</div></pre></td></tr></table></figure>


<p>上述注解的@target表示该注解只能用在函数上,还有Type、Field、PARAMETER等类型,可以参考上述给出的参考资料。通过反射api我们也能够获取一个Class对象获取类型、字段、函数等相关的对象,通过这些对象的getAnnotation接口获取到对应的注解信息。<br>   首先我们需要在目标对象上添加上注解,例如 : </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="annotation">@Test</span>(tag = <span class="string">"Student class Test Annoatation"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Examination</span> </span>{</div><div class="line">    <span class="comment">// 年级</span></div><div class="line">    <span class="annotation">@Test</span>(tag = <span class="string">"mGrade Test Annotation "</span>)</div><div class="line">    <span class="keyword">int</span> mGrade;</div><div class="line">    </div><div class="line">    <span class="comment">// ......</span></div><div class="line">}</div></pre></td></tr></table></figure>


<p>   然后通过相关的注解函数得到注解信息,如下所示 :   </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getAnnotationInfos</span>() {</div><div class="line">    Student student = <span class="keyword">new</span> Student(<span class="string">"mr.simple"</span>);</div><div class="line">    Test classTest = student.getClass().getAnnotation(Test.class);</div><div class="line">    System.<span class="keyword">out</span>.println(<span class="string">"class Annotatation tag = "</span> + classTest.tag());</div><div class="line">    </div><div class="line">    Field field = <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">try</span> {</div><div class="line">        field = student.getClass().getDeclaredField(<span class="string">"mGrade"</span>);</div><div class="line">        Test testAnnotation = field.getAnnotation(Test.class);</div><div class="line">        System.<span class="keyword">out</span>.println(<span class="string">"字段的Test注解tag : "</span> + testAnnotation.tag());</div><div class="line">    } <span class="keyword">catch</span> (Exception e) {</div><div class="line">        e.printStackTrace();</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>


<p>  输出结果为 :<br>&gt;</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">class Annotatation tag = Student class <span class="keyword">Test</span> Annoatation</div><div class="line">字段的<span class="keyword">Test</span>注解tag : mGrade <span class="keyword">Test</span> Annotation</div></pre></td></tr></table></figure>

<p><strong>接口说明</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 获取指定类型的注解</span></div><div class="line"><span class="keyword">public</span> &lt;A extends Annotation&gt; A <span class="title">getAnnotation</span>(Class&lt;A&gt; annotationClass) ;</div><div class="line"><span class="comment">// 获取Class对象中的所有注解</span></div><div class="line"><span class="keyword">public</span> Annotation[] <span class="title">getAnnotations</span>() ;</div></pre></td></tr></table></figure>



<h2 id="杂谈">杂谈</h2>
<p>   反射作为Java语言的重要特性,在开发中有着极为重要的作用。很多开发框架都是基于反射来实现对目标对象的操作,而反射配合注解更是设计开发框架的主流选择,例如ActiveAndroid,因此深入了解反射的作用以及使用对于日后开发和学习必定大有益处。</p>
  
	</div>
		<footer class="article-footer clearfix">

  <div class="article-tags">
  
  <span></span> <a href="/tags/android/">android</a>
  </div>




<div class="article-share" id="share">

  
<div class="jiathis_style">
    <span class="jiathis_txt">分享到：</span>
    <a class="jiathis_button_tsina">新浪微博</a>
    <a class="jiathis_button_weixin">微信</a>
    <a class="jiathis_button_twitter">Twitter</a>
    <a class="jiathis_button_evernote">EverNote</a>
    <a href="http://www.jiathis.com/share?uid=1501277" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
</div>
<script type="text/javascript" >
    var jiathis_config={
    data_track_clickback:true,
    sm:"copy,renren,cqq",
    pic:"",
    summary:"",
    
  </script> 
<script type="text/javascript" src="//v3.jiathis.com/code/jia.js?uid=
" charset="utf-8"></script>      


</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/02/12/2014个人总结/" title="2014个人总结">
  <strong>PREVIOUS:</strong><br/>
  <span>
  2014个人总结</span>
</a>
</div>


<div class="next">
<a href="/2015/02/12/nineold/"  title="NineOldAnimations 设计解析">
 <strong>NEXT:</strong><br/> 
 <span>NineOldAnimations 设计解析
</span>
</a>
</div>

</nav>

	
<section class="comment">
	<div class="ds-thread"></div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-_了解Java中的反射"><span class="toc-number">1.</span> <span class="toc-text">1. 了解Java中的反射</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1_什么是Java的反射"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 什么是Java的反射</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2_Class类"><span class="toc-number">2.</span> <span class="toc-text">1.2 Class类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-_反射Class以及构造对象"><span class="toc-number">3.</span> <span class="toc-text">2. 反射Class以及构造对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1_获取Class对象"><span class="toc-number">3.1.</span> <span class="toc-text">2.1 获取Class对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2_通过Class对象构造目标类型的对象"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 通过Class对象构造目标类型的对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3_反射获取类中函数"><span class="toc-number">4.</span> <span class="toc-text">3 反射获取类中函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1_获取当前类中定义的方法"><span class="toc-number">4.1.</span> <span class="toc-text">3.1 获取当前类中定义的方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2_获取当前类、父类中定义的公有方法"><span class="toc-number">4.2.</span> <span class="toc-text">3.2 获取当前类、父类中定义的公有方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4_反射获取类中的字段"><span class="toc-number">5.</span> <span class="toc-text">4 反射获取类中的字段</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1_获取当前类中定义的字段"><span class="toc-number">5.1.</span> <span class="toc-text">4.1 获取当前类中定义的字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2_获取当前类、父类中定义的公有字段"><span class="toc-number">5.2.</span> <span class="toc-text">4.2 获取当前类、父类中定义的公有字段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5_反射获取父类与接口"><span class="toc-number">6.</span> <span class="toc-text">5 反射获取父类与接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1_获取父类"><span class="toc-number">6.1.</span> <span class="toc-text">5.1 获取父类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2_获取接口"><span class="toc-number">6.2.</span> <span class="toc-text">5.2 获取接口</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6_获取注解信息"><span class="toc-number">7.</span> <span class="toc-text">6 获取注解信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#杂谈"><span class="toc-number">8.</span> <span class="toc-text">杂谈</span></a></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  

  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			<li><a href="/tags/android/" title="android">android<sup>1</sup></a></li>
		
			<li><a href="/tags/开源库，设计模式，Android/" title="开源库，设计模式，Android">开源库，设计模式，Android<sup>1</sup></a></li>
		
			<li><a href="/tags/设计模式，Android/" title="设计模式，Android">设计模式，Android<sup>1</sup></a></li>
		
			<li><a href="/tags/面向对象/" title="面向对象">面向对象<sup>1</sup></a></li>
		
		</ul>
</div>


  <div class="rsspart">
	<a href="null" target="_blank" title="rss">RSS</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<div class="social-font clearfix">
		
		
		
		
		
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2015 
		
		<a href="http://www.simplecoder.cn" target="_blank" title="Mr.Simple">Mr.Simple</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"null"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 




<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'null', 'null');  
ga('send', 'pageview');
</script>


  </body>
</html>
